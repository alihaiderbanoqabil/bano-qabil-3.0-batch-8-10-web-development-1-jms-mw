<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class 25 (Class 9 of JS)</title>
</head>

<body>
    <h1>Class 25 (Class 9 of JS)</h1>
    <button onclick="resetInterval()">Reset Interval</button>
    <button onclick="resetTimeout()">Reset Timeout</button>
    <button onclick="getTodos()">Get Todos</button>
    <script>
        console.log("Class 25 (Class 9 of JS)", window);

        // console.log("before setInterval");
        // let index = 0
        // const interval = setInterval(() => {
        //     console.log('Hi from setInterval', index);
        //     index++
        // }, 1000)

        // function resetInterval() {
        //     clearInterval(interval)
        // }
        // console.log("after setInterval");

        // console.log("before setTimeout");
        // let index = 0
        // const interval = setTimeout(() => {
        //     console.log('Hi from setTimeout', index);
        //     index++
        // }, 5000)
        // function resetTimeout() {
        //     clearTimeout(interval)
        // }
        // console.log("after setTimeout");


        // const fruits = [
        //     { name: "apples", quantity: 300, type: 'fruit' },
        //     { name: "bananas", quantity: 500, type: 'fruit' },
        //     { name: "oranges", quantity: 200, type: 'fruit' },
        //     { name: "kiwi", quantity: 150, type: 'fruit' },
        //     { name: "tomoto", quantity: 300, type: 'vegetable' },
        //     { name: "potato", quantity: 500, type: 'vegetable' },
        // ];

        // // localStorage.setItem('fruits', fruits)
        // localStorage.setItem('fruits', JSON.stringify(fruits))
        // localStorage.setItem('email', "ali@gmail.com")
        localStorage.setItem('age', 20)
        // localStorage.setItem('isMale', true)


        // console.log(localStorage.getItem('email'));
        // console.log(localStorage.getItem('Email'));
        // const age = localStorage.getItem('age')
        // localStorage.removeItem('isMale')
        // // localStorage.clear()
        // console.log(typeof age, age, Number(age));
        // console.log(typeof localStorage.getItem('isMale'));
        // console.log(localStorage.length);
        // console.log(localStorage.key(0));
        // console.log(localStorage.key(1));
        // console.log(localStorage.key(10));

        // sessionStorage.setItem('isMale', true)


        // cookies in JS
        // document.cookie = "username=John Doe";
        // document.cookie = "username=John Doe; expires=Thu, 18 Dec 3013 12:00:00 UTC";
        // document.cookie = "username=John Doe; expires=Thu, 18 Dec 3013 12:00:00 UTC; path=/";
        // document.cookie = "username=John Smith; expires=Thu, 18 Dec 3013 12:00:00 UTC; path=/";
        // document.cookie = "email=John@gamil.com; expires=Thu, 18 Dec 3013 12:00:00 UTC; path=/";
        // // console.log(document.cookie);
        // function getCookieObject(cookies) {
        //     const cookieObject = {};
        //     const splitCookieByEqual = cookies.split("; ")
        //     for (const cookieKeyValuePair of splitCookieByEqual) {
        //         const cookieKeyValuePairArray = cookieKeyValuePair.split("=")
        //         cookieObject[cookieKeyValuePairArray[0]] = cookieKeyValuePairArray[1]
        //     }
        //     return cookieObject
        // }
        // function getCookieByKeyName(key, cookies) {
        //     // const cookieObject = {};
        //     // const splitCookieByEqual = cookies.split("; ")
        //     // for (const cookieKeyValuePair of splitCookieByEqual) {
        //     //     const cookieKeyValuePairArray = cookieKeyValuePair.split("=")
        //     //     cookieObject[cookieKeyValuePairArray[0]] = cookieKeyValuePairArray[1]
        //     //     // console.log(cookieKeyValuePair, 'cookieKeyValuePair', cookieKeyValuePairArray);
        //     // }
        //     // // console.log(cookieObject, 'cookieObject');

        //     // // const splitCookieByEqual = cookies.split("; ")
        //     // // console.log(splitCookieByEqual, 'splitCookieByEqual');
        //     const cookieObject = getCookieObject(cookies)
        //     return cookieObject[key]
        // }
        // const cookies = document.cookie;
        // console.log(getCookieByKeyName('username', cookies));
        // console.log(getCookieByKeyName('email', cookies));
        // console.log(getCookieObject(cookies));



        // fetch api in JS 
        let isLoading = false;
        console.log("Before api calling");
        // function getTodos() {
        //     isLoading = true;
        //     // fetch('https://jsonplaceholder.typicode.com/todos')
        //     //     .then(response => response.json())
        //     //     .then(json => console.log(json, 'todos'))
        //     fetch('https://jsonplaceholder.typicode.com/todos')
        //         .then((response) => {
        //             console.log(response, 'response');
        //             return response.json()
        //         })
        //         .then((todos) => {
        //             console.log(todos, 'todos');
        //             // isLoading = false;
        //         })
        //         .catch((error) => {
        //             console.log(error, 'error');
        //             // isLoading = false;
        //         })
        //         .finally(() => {
        //             isLoading = false;
        //             console.log('finally block executes');

        //         })
        // }

        // async function getTodos() {
        //     try {
        //         isLoading = true;
        //         const response = await fetch('https://jsonplaceholder.typicode.com/todos')
        //     } catch (error) {

        //     }
        // }
        const getTodos = async () => {
            const token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
            try {
                isLoading = true;
                const response = await fetch('https://jsonplaceholder.typicode.com/todos', {
                    // method: 'GET',
                    // method: 'POST',
                    // method: 'PUT',
                    // method: 'PATCH',
                    // method: 'DELETE',
                    // body: JSON.stringify({ username: "ali", age: 10 }),
                    // headers: {
                    //     'Authorization': `Bearer ${localStorage.getItem('token')}`
                    // }
                })
                const todos = await response.json();
                console.log(response, 'response');
                console.log(todos, 'todos');

                // isLoading = false;

            } catch (error) {
                console.log(error, 'error');

                // isLoading = false;
            }
            finally {
                isLoading = false;
                console.log('finally block executes');

            }
        }
        getTodos();
        console.log("After api calling");

    </script>
</body>

</html>